# 17강 정규화 - NF

# 정규화

- 삽입, 수정, 삭제의 이상현상을 제거
- 데이터의 중복 최소화
- 대부분 3차 정규화까지 진행

# 1차 정규화(1NF)

- 하나의 컬럼에 값이 1개씩만 있어야 한다.
- 반복적인 컬럼 값이 나타나는 경우 검색이 힘들다.

| 비 정규화 |  |  |
| --- | --- | --- |
| 상품명 |  |  |
| 바지 1 | 바지 2 | 바지 2 |

| 1차 정규화 |  |  |
| --- | --- | --- |
| 상품명 |  |  |
| 바지 1 |  |  |
| 바지 2 |  |  |
| 바지 3 |  |  |

# 2차 정규화(2NF)

- 테이블의 모든 컬럼이 서로 관계가 있어야 한다.
- 모든 컬럼이 서로 관계가 없는 경우

| 비 정규화 |  |  |
| --- | --- | --- |
| USER |  |  |
| 이름 | 나이 | 상품명 |
| 홍길동 | 10 | 바지 |
| 고길동 | 11 | 치마 |
| 김길동 | 12 | 자켓 |

| 2차 정규화 |  |
| --- | --- |
| USER |  |
| 이름 | 나이 |
| 홍길동 | 10 |
| 고길동 | 11 |
| 김길동 | 12 |

| 2차 정규화 |  |
| --- | --- |
| PRODUCT |  |
| 나이 | 상품명 |
| 10 | 홍길동 |
| 11 | 고길동 |
| 12 | 김길동 |

# 3차 정규화

- 우편 번호로 시, 구, 동을 알 수 있다.
- 중복된 데이터가 생길 가능성이 있다.

| 비 정규화 |  |  |  |  |
| --- | --- | --- | --- | --- |
| 이름 | 시 | 구 | 동 | 우편 번호 |
| 홍길동 | 서울특별시 | 강남구 | 봉천동 | 12345 |
| 고길동 | 인천광역시 | 서구 | 검암동 | 54321 |

| 3차 정규화 |  |
| --- | --- |
| 이름 | 우편 번호 |
| 홍길동 | 12345 |
| 고길동 | 54321 |

| 3차 정규화 |  |  |  |
| --- | --- | --- | --- |
| 우편번호 | 시 | 구 | 동 |
| 12345 | 서울특별시 | 강남구 | 봉천동 |
| 54321 | 인천광역시 | 서구 | 검암동 |

# 정규화가 필요한 이유

- 데이터를 잘못 설계하면 불필요한 데이터 중복으로 인해
공간이 낭비된다. 이러한 현상을 이상(Anomaly)라고 한다.

# 예시

- 회원 번호와 프로젝트 코드 두 컬럼의 조합키로 설정되어 있는 테이블이고
한 사람은 하나의 부서만 가질 수 있다.

| 회원번호 | 이름 | 부서 | 프로젝트 코드 | 급여  | 부서별 명수 |
| --- | --- | --- | --- | --- | --- |
| 2410151 | 홍길동 | 개발팀 | ABC0001 | 3000 | 5 |
| 2410152 | 홍길동 | 개발팀 | ABC0002 | 2500 | 5 |
| 2410153 | 홍길동 | 개발팀 | ABC0003 | 2800 | 5 |
| 2410154 | 고길동 | 인사팀 | HEL001 | 3500 | 3 |
| 2410155 | 김길동 | 기획팀 | HEL002 | 3200 | 4 |

# 이상 현상의 종류

- 삽입 이상
    - 새 데이터를 삽입하기 위해 불필요한 데이터도 삽입해야 하는 문제
    - ex) 담당 프로젝트가 정해지지 않은 사원이 있다면, 프로젝트 코드에 NULL을 작성할 수 없으므로 이 사원은 테이블에 추가될 수 없다. 
    따라서 ‘미정’이라는 프로젝트 코드를 따로 만들어서 삽입해야 한다.